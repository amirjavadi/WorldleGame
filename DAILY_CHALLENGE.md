# چالش روزانه وردل فارسی

## 1. مقدمه
چالش روزانه یک ویژگی جذاب در بازی وردل است که به کاربران اجازه می‌دهد در یک چالش یکسان روزانه شرکت کنند. این ویژگی باعث افزایش تعامل کاربران و ایجاد رقابت سالم می‌شود.

## 2. ویژگی‌های اصلی
- کلمه یکسان روزانه برای همه کاربران
- سیستم امتیازدهی بر اساس عملکرد
- جدول امتیازات روزانه
- محدودیت زمانی (24 ساعت)
- نمایش زمان باقی‌مانده تا چالش بعدی
- طراحی مینیمال و مدرن مدال نتایج
- انیمیشن‌های روان برای نمایش رتبه‌بندی
- پشتیبانی از حالت خالی (noPlayer)
- ترجمه‌های فارسی و انگلیسی

## 3. ساختار فنی

### 3.1 فرانت‌اند
#### کامپوننت‌های اصلی
- `GameBoard.vue`: کامپوننت اصلی بازی (بازنویسی شده برای پشتیبانی از حالت چالش روزانه)
- `DailyStatsModal.vue`: نمایش آمار و رتبه‌بندی
- `MainNav.vue`: سوئیچ حالت بازی و دسترسی به آمار

#### State Management
- `dailyChallenge.js`: مدیریت state چالش روزانه
  - وضعیت مشارکت
  - امتیاز فعلی
  - اطلاعات کلمه روزانه
  - رتبه‌بندی

#### API Integration
```javascript
daily: {
  getWord: () => {}, // دریافت کلمه روزانه
  participate: () => {}, // ثبت مشارکت
  submitGuess: () => {}, // ارسال حدس
  getLeaderboard: () => {}, // دریافت جدول امتیازات
  getParticipation: () => {} // دریافت وضعیت مشارکت
}
```

### 3.2 بک‌اند
#### سرویس‌ها
- `DailyChallengeService`: مدیریت منطق چالش روزانه
- `IDailyChallengeService`: تعریف متدهای مورد نیاز

#### مدل‌های داده
```csharp
public class DailyChallenge
{
    public int Id { get; set; }
    public string Word { get; set; }
    public DateTime Date { get; set; }
    public bool IsActive { get; set; }
}

public class DailyParticipation
{
    public int Id { get; set; }
    public int UserId { get; set; }
    public int ChallengeId { get; set; }
    public DateTime StartTime { get; set; }
    public DateTime? EndTime { get; set; }
    public int Score { get; set; }
    public int Attempts { get; set; }
    public ParticipationStatus Status { get; set; }
}
```

## 4. فرآیند اجرایی

### 4.1 انتخاب کلمه روزانه
- اجرای یک Job روزانه در ساعت 00:00
- انتخاب تصادفی کلمه از دیتابیس
- ایجاد رکورد جدید در جدول DailyChallenge

### 4.2 مشارکت کاربر
1. ورود به حالت چالش روزانه
2. بررسی وضعیت مشارکت
3. ثبت مشارکت جدید (در صورت عدم مشارکت)
4. شروع بازی

### 4.3 محاسبه امتیاز
```csharp
public int CalculateScore(int attempts, TimeSpan timeSpent)
{
    const int baseScore = 1000;
    const int attemptPenalty = 100;
    const int timePenalty = 50;
    
    int score = baseScore;
    score -= (attempts - 1) * attemptPenalty;
    score -= (int)(timeSpent.TotalSeconds / 300) * timePenalty;
    
    return Math.Max(0, score);
}
```

### 4.4 رتبه‌بندی
- مرتب‌سازی بر اساس امتیاز
- در نظر گرفتن زمان حل
- به‌روزرسانی دوره‌ای جدول امتیازات

## 5. نکات پیاده‌سازی

### 5.1 امنیت
- اعتبارسنجی توکن برای هر درخواست
- محدودیت تعداد حدس‌ها
- جلوگیری از تقلب در زمان

### 5.2 عملکرد
- کش کردن نتایج جدول امتیازات
- بهینه‌سازی کوئری‌های دیتابیس
- مدیریت همزمانی در ثبت حدس‌ها

### 5.3 UX/UI
- نمایش واضح وضعیت مشارکت
- انیمیشن‌های مناسب
- سازگاری با تم‌های روشن و تاریک
- پشتیبانی از RTL
- طراحی مینیمال مدال نتایج
- حذف دکمه بستن
- نمایش ساده رتبه‌بندی
- انیمیشن‌های روان برای نمایش نتایج
- پشتیبانی از حالت خالی
- ترجمه‌های فارسی و انگلیسی

## 6. تست‌ها
- تست واحد برای محاسبه امتیاز
- تست یکپارچگی برای API ها
- تست عملکرد برای مدیریت همزمانی
- تست UI برای نمایش صحیح اطلاعات

## 7. نگهداری
- پاکسازی خودکار چالش‌های قدیمی
- بهینه‌سازی دوره‌ای دیتابیس
- مانیتورینگ عملکرد
- لاگ‌گیری برای عیب‌یابی

## 8. توسعه‌های آینده
- اضافه کردن دستاوردهای ویژه
- سیستم جوایز هفتگی
- رقابت‌های گروهی
- آمار پیشرفته‌تر 